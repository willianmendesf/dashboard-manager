<div class="sidebar" [class.open]="isOpen()">
  <div class="sidebar-header">
    <h2 class="logo">
      <a href="#">
        <img [src]="logoUrl()" width="200px" (error)="onLogoError($event)"/>
      </a>
    </h2>
    <button class="close-btn" (click)="close()" *ngIf="isOpen()">Ã—</button>
  </div>

  <nav class="sidebar-nav">
    <ul>
      <li *ngFor="let item of filteredMenuItems">
        <a
          [routerLink]="item.path"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{exact: item.exact}"
          class="nav-link"
          (click)="close()"
        >
          <span class="nav-icon" [innerHTML]="item.icon" [attr.aria-hidden]="true"></span>
          <span class="nav-text">{{ item.label }}</span>
        </a>
      </li>
      <li *ngIf="currentUser">
        <button
          class="nav-link logout-link"
          (click)="logout(); close()"
        >
          <span class="nav-icon" [innerHTML]="getLogoutIcon()" [attr.aria-hidden]="true"></span>
          <span class="nav-text">Sair</span>
        </button>
      </li>
    </ul>
  </nav>

  <div class="sidebar-footer" *ngIf="currentUser">
    <div class="user-info">
      <img 
        [src]="userPhotoUrl" 
        [alt]="currentUser.name || currentUser.username"
        class="user-avatar"
        (error)="onImageError($event)"
      />
      <div class="user-text">
        <span class="user-name">{{ currentUser.name || currentUser.username }}</span>
        <span class="user-profile">{{ currentUser.profileName }}</span>
      </div>
    </div>
    <a routerLink="/meu-perfil" class="btn-edit-profile" (click)="close()">
      Editar Perfil
    </a>
    <button class="btn-logout" (click)="logout()">
      Sair
    </button>
  </div>
</div>
