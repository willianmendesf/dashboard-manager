<div class="user-header" *ngIf="currentUser">
  <div class="user-info" (click)="toggleDropdown()" [attr.aria-label]="'Menu do usuÃ¡rio'">
    <img 
      [src]="userPhotoUrl" 
      [alt]="userName"
      class="user-avatar"
      (error)="onImageError($event)"
    />
    <span class="user-name">{{ userName }}</span>
    <svg class="dropdown-arrow" [class.open]="showDropdown()" width="12" height="12" viewBox="0 0 12 12" fill="none">
      <path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>

  <div 
    class="user-dropdown" 
    *ngIf="showDropdown()"
    (clickOutside)="closeDropdown()"
  >
    <div class="dropdown-header">
      <img 
        [src]="userPhotoUrl" 
        [alt]="userName"
        class="dropdown-avatar"
        (error)="onImageError($event)"
      />
      <div class="dropdown-user-info">
        <div class="dropdown-name">{{ userName }}</div>
        <div class="dropdown-profile">{{ userProfile }}</div>
      </div>
    </div>
    
    <div class="dropdown-divider"></div>
    
    <div class="dropdown-menu">
      <a routerLink="/meu-perfil" class="dropdown-item" (click)="goToProfile()">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M8 8C10.2091 8 12 6.20914 12 4C12 1.79086 10.2091 0 8 0C5.79086 0 4 1.79086 4 4C4 6.20914 5.79086 8 8 8Z" fill="currentColor"/>
          <path d="M0 14C0 11.2386 3.58172 10 8 10C12.4183 10 16 11.2386 16 14V16H0V14Z" fill="currentColor"/>
        </svg>
        <span>Editar Perfil</span>
      </a>
      
      <button class="dropdown-item logout-item" (click)="logout()">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M6 14H3.33333C2.97971 14 2.64057 13.8595 2.39052 13.6095C2.14048 13.3594 2 13.0203 2 12.6667V3.33333C2 2.97971 2.14048 2.64057 2.39052 2.39052C2.64057 2.14048 2.97971 2 3.33333 2H6M10.6667 11.3333L14 8M14 8L10.6667 4.66667M14 8H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Sair</span>
      </button>
    </div>
  </div>
</div>
