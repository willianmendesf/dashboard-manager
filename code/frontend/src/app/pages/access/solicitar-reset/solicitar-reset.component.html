<div class="reset-container">
  <div class="reset-card">
    <div class="reset-header">
      <h1>Esqueci minha senha</h1>
      <p>Informe seu telefone celular para receber um código de verificação</p>
    </div>

    @if (step === 1) {
      <form (ngSubmit)="requestCode()" class="reset-form">
        @if (error) {
          <div class="error-message">
            {{ error }}
          </div>
        }

        <div class="form-group">
          <label for="phone">Telefone Celular *</label>
          <input 
            id="phone" 
            type="text" 
            [(ngModel)]="phone" 
            name="phone" 
            [mask]="'(00) 00000-0000'"
            [dropSpecialCharacters]="false"
            class="form-control"
            placeholder="(00) 00000-0000"
            [disabled]="isLoading"
            required>
        </div>

        <button type="submit" class="btn-submit" [disabled]="isLoading || !isPhoneValid()">
          {{ isLoading ? 'Enviando...' : 'Receber Código' }}
        </button>
      </form>
    }

    @if (step === 2) {
      <form (ngSubmit)="validateCode()" class="reset-form">
        @if (error) {
          <div class="error-message">
            {{ error }}
          </div>
        }

        <div class="alert-info">
          Código enviado para <strong>{{ phone }}</strong>
          <a (click)="step = 1; code = ''; error = ''" class="change-number">Alterar</a>
        </div>

        <div class="form-group">
          <label for="code">Código de Verificação *</label>
          <input 
            id="code" 
            type="text" 
            [(ngModel)]="code" 
            name="code" 
            [mask]="'000000'"
            class="form-control code-input"
            placeholder="XXXXXX"
            maxlength="6"
            [disabled]="isLoading"
            required>
        </div>

        <button type="submit" class="btn-submit" [disabled]="isLoading || !code || code.length !== 6">
          {{ isLoading ? 'Validando...' : 'Redefinir Senha' }}
        </button>
      </form>
    }

    <div class="reset-footer">
      <a routerLink="/login">Voltar para o login</a>
    </div>
  </div>
</div>

